<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Fun with nodejs</title>
	<link rel="stylesheet" href="style.css" type="text/css">
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery.min.js"></script>

	<style type="text/css">
	#i1 {position:absolute; left: 600px; top: 100px;}
	#h1 {position:absolute; left: 600px; top: 100px;}
	</style>

</head>
<body style="background: #444">

<div class="logo" width="200" height="100">Silicon Valley Lines</div>
<div id="t100" class="turnout thrown"">fnord</div>
<div id="t101" class="turnout closed">fnord</div>
<div id="t102" class="turnout thrown" style="-webkit-transform: scaleX(-1); -moz-transform: scaleX(-1);">fnord</div>

<div class="light" width="100" height="80">
	<img id='h1' src="holder.png" alt="" />
	<img id='i1' class="on" src="light.png" alt="" />
</div>

<script>
	
	$(document).ready(function() {
		var socket = io.connect();
		
		socket.on('connect', function () {
			console.log("connected");
			socket.send('hello');
		});

		socket.on('message', function (data) {
			console.log(data);
		});

		socket.on('disconnect', function () {
			console.log("disconnected");
		});

		$("div.turnout").click(function(event) {
			event.preventDefault();
			var $target = $(event.target);
			$target.toggleClass("thrown closed");
			console.log(event.target.id);
			socket.emit('set',{name:event.target.id, state:$target.hasClass('thrown')});
		});

		$("div.logo").click(function(event) {
			event.preventDefault();
			$("#i1").toggleClass("on off");
    		socket.emit('set', { name:'i1', state:$('#i1').hasClass('on') });
		});

	});
</script>
</body>
</html>
